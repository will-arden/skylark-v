# skylark-v
*skylark-v* is a lightweight and straightforward 4-stage [RISC-V](https://riscv.org/) processor, inspired by [RI5CY](https://www.pulp-platform.org/docs/ri5cy_user_manual.pdf) and implemented in SystemVerilog. The standout feature of this design is the inclusion of a hardware acceleration unit for [Binarized Neural Network (BNN)](https://arxiv.org/abs/1603.05279) inference operations.  

A link to the project planning interface (Notion) can be found [here.](https://boatneck-ping-f37.notion.site/Individual-Project-24f37a1b95bd4415b68c7d97c25824d7?pvs=4) It documents the journey so far!

### System Design Diagram:
![Block_Diagram](https://github.com/will-arden/risc-v-core/blob/main/doc/block_diagram?raw=true)
*Note: This is an outdated system diagram.*

---

### To-do
* Create and include the BNN unit and support the accompanying BNN instructions
* Add a *load stall buffer* to minimise load stalling (currently 2 cycles)
* Simplify the branch behaviour

### Changelog (v0.4.1)
* Tidied SystemVerilog code and comments
* Removed unused/unnecesary signals
* Created a `decoder` module within `control` to handle the instruction decode logic in a dedicated unit
* Moved the `hcu` module into the `control` module

---

### Previous versions

#### Changelog (v0.4.0)
* Three pipeline registers added to create a 4-stage pipelined implementation
* Hazard Control Unit created
* Forwarding multiplexers added for RAW hazards
* Pipeline stalling and flushing implemented
* Load stalling for 2 cycles
* Branch instructions supported for pipelined architecture
  - AGU moved to the Decode stage
  - Fetch stage outputs a `branched_flag_F` signal following a branch
#### Other minor changes
* Changed `Instr` to `InstrF` in the top-level modules
* Changed `zero` and `negative` to `Z` and `N` respectively
* Removed the `timescale` directive from all modules bar the top-level testbench
* The `WriteAddr` signal was previously always set to `0x0`. Instead, the `ALUResult` signal should be used when specifying the write address to external data memory.
* Used a for-loop in the register file for zeroing the registers on reset - much more code-efficient.
* On reset, the pipeline is filled with `NOP` instructions.

#### Changelog (v0.3.5)
* Register file reset bug fixed
* Latch generated by `condition_met` signal has been removed
* `BEQ`, `BNE`, `BLT` and `BGE` are fully implemented
* Fixed negative flag issue in `ALU.sv`
* `JAL` instructions now write the link address (`PC+4`) to the register file
* 3:1 multiplexer added to select the output from the Execute stage (selecting using `ExPathE`)

![Skylark](https://github.com/will-arden/risc-v-core/blob/main/doc/skylark2.jfif?raw=true)
